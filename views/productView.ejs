<%- include('partials/header.ejs') %>
<head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">    
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
          <script>
        function insertToCart(name, price){
                $.ajax({
                      method: "POST",
                         url: "/addToCart",
                    dataType: "JSON",
                        data: { "prodName":name,
                                "prodPrice":price},
                     success: function(result,status) {
                        alert(name + " has been added to your cart!");
                    }
                    
                });//ajax
        
        } //document.ready
        
        function insertReview(prodname, rating, username, review){
                $.ajax({
                      method: "POST",
                         url: "/addReview",
                    dataType: "JSON",
                        data: { "prodname":prodname,
                                "rating":rating,
                                "username":username,
                                "review":review
                                
                        },
                     success: function(result,status) {
                        alert("Your review has been added");
                        
                    }
                    //res.redirect('/productView?name=' + product.name + product.name);
                });//ajax
        
        } //document.ready
        
        function countStars() {
          var count = 0;
          for(var i = 0; i <= 5; i++) {
            if(document.getElementById("star-" + i).checked) {
              count++;
            }
          }
          return count;
          
        }
        
        </script>
          <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
        <style>
                .checked {
                  color: orange;
                }
                
                .form-group {
                  padding:20px;
                }
                
                .form-group .review {
                  width:80%;
                  height:50px;
                  
                }
                
                div.stars {
                width: 270px;
                display: inline-block;
              }
              
              input.star { display: none; }
              
              label.star {
                float: right;
                padding: 10px;
                font-size: 20px;
                color: #444;
                transition: all .2s;
              }
              
              input.star:checked ~ label.star:before {
                content: '\f005';
                color: #FD4;
                transition: all .25s;
              }
              
              input.star-5:checked ~ label.star:before {
                color: #FE7;
                text-shadow: 0 0 20px #952;
              }
              
              input.star-1:checked ~ label.star:before { color: #F62; }
              
              label.star:hover { transform: rotate(-15deg) scale(1.3); }
              
              label.star:before {
                content: '\f006';
                font-family: FontAwesome;
              }
        </style>
</head>
        <div class="card mb-3">
        <div class="row no-gutters">
        <div class="col-md-4">
        <img src="<%=product.image%>"width=480 height=480>
        </div>
        <div class="col-md-8">
        <div class="card-body">
        <h2 class="card-title"><%= product.name %></h2>
        <h3 class="card-text">$<%= product.price %>.00</h3>
        <p class="card-text text-danger">Only <%= product.quantity %> left in stock!</p>
        
        <h4>Description</h4>

        <%= product.description %>
        
        
        <td class="align-middle"><button class="btn btn-primary btn-lg btn-block" onclick="insertToCart('<%=product.name%>','<%=product.price%>')">Add to Cart</button></td>
        </div>
        </div>
        </div>
        </div>
        
        <form>
          <div class="form-group">
            <form>
              <h5>Add a new review</h5>
              <form method="POST">
            <input class="star star-5" id="star-5" type="radio" name="star"/>
            <label class="star star-5" for="star-5"></label>
            <input class="star star-4" id="star-4" type="radio" name="star"/>
            <label class="star star-4" for="star-4"></label>
            <input class="star star-3" id="star-3" type="radio" name="star"/>
            <label class="star star-3" for="star-3"></label>
            <input class="star star-2" id="star-2" type="radio" name="star"/>
            <label class="star star-2" for="star-2"></label>
            <input class="star star-1" id="star-1" type="radio" name="star"/>
            <label class="star star-1" for="star-1"></label>
          
          
              <input type="text" class="review" name="review"><br><br>
              <td class="align-middle"><button class="btn btn-primary" onclick="insertReview('<%=product.name%>', countStars(), 'maryann', document.getElementById('review').value )">Publish</button></td>
              <div class="stars">                                                                                                             
          
        </div></form>
            </form>
          </div>
          </form>
          
          
        <div class="card text-center">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs">
      <li class="nav-item">
        <a class="nav-link">Reviews <span class="fa fa-star checked"></span>
        <span class="fa fa-star checked"></span>
        <span class="fa fa-star checked"></span>
        <span class="fa fa-star"></span>
        <span class="fa fa-star"></span></a>
      </li>
    </ul>
  </div>
  <div class="card-body">
    <p class="card-text" align="left">
                <b>CatLady</b>          My cat loved these shoes!
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span><br><br>
      
    </p>
  </div>
</div>
        
    </body>
</html>